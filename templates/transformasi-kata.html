<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <link href="{{ url_for('static', filename='output.css') }}" rel="stylesheet" />
    <title>Hadoop Frequency Count</title>
  </head>
  <body class="bg-[#0e1117] h-full min-h-screen text-white flex flex-col">
    <div class="flex flex-col ms-7 mt-7 md:flex-row items-start md:items-center">
      <a class="text-sm link link-animated" href="{{ url_for('index') }}">‚Üê Kembali</a>
    </div>
    <div class="flex-1 flex flex-col items-center mt-8">
      <h1 class="text-3xl font-semibold mb-10">Transformasi Kata - Encryption & Decryption</h1>
      <div class="w-md max-w-xl">
        <form method="POST" class="space-y-5">
          <!-- Input teks -->
          <div>
            <label class="label-text" for="textareaLabel">Teks:</label>
            <textarea name="teks" class="textarea w-full h-25 bg-[#0e1117]" placeholder="Masukkan teks di sini..." id="textareaLabel" required></textarea>
          </div>

          <!-- Pilih mode -->
          <div>
            <label class="label-text" for="favorite-simpson">Pilih Mode:</label>
            <select name="mode" class="select bg-[#0e1117]" id="mode">
              <option value="caesar_encrypt">Caesar Encrypt</option>
              <option value="caesar_decrypt">Caesar Decrypt</option>
              <option value="vigenere_encrypt">Vigenere Encrypt</option>
              <option value="vigenere_decrypt">Vigenere Decrypt</option>
            </select>
          </div>

          <!-- Input shift untuk Caesar -->
          <div id="shift_box" class="" data-input-number>
            <label class="label-text" for="number-input-mini">Key (untuk Vigenere):</label>
            <div class="input items-center bg-[#0e1117]">
              <button type="button" class="btn btn-primary btn-soft size-5.5 min-h-0 rounded-sm p-0" aria-label="Decrement button" data-input-number-decrement>
                <span class="icon-[tabler--minus] size-3.5 shrink-0"></span>
              </button>
              <input name="shift" class="text-center" type="text" value="0" aria-label="Mini stacked buttons" data-input-number-input id="shift_box" />
              <button type="button" class="btn btn-primary btn-soft size-5.5 min-h-0 rounded-sm p-0" aria-label="Increment button" data-input-number-increment>
                <span class="icon-[tabler--plus] size-3.5 shrink-0"></span>
              </button>
            </div>
          </div>

          <!-- Input key untuk Vigenere -->
          <div id="key_box" class="" style="display: none" data-input-number>
            <label class="label-text" for="number-input-mini">Key (untuk Vigenere):</label>
            <div class="input items-center">
              <button type="button" class="btn btn-primary btn-soft size-5.5 min-h-0 rounded-sm p-0" aria-label="Decrement button" data-input-number-decrement>
                <span class="icon-[tabler--minus] size-3.5 shrink-0"></span>
              </button>
              <input name="key" class="text-center" type="text" value="0" aria-label="Mini stacked buttons" data-input-number-input id="key_box" />
              <button type="button" class="btn btn-primary btn-soft size-5.5 min-h-0 rounded-sm p-0" aria-label="Increment button" data-input-number-increment>
                <span class="icon-[tabler--plus] size-3.5 shrink-0"></span>
              </button>
            </div>
          </div>

          <button class="btn btn-soft btn-accent items-center w-36 h-8 mt-2">Proses</button>
        </form>

        <!-- HASIL -->
        {% if hasil %}
        <div class="mt-8 p-5">
          <h2 class="text-xl font-bold mb-2">Hasil:</h2>
          <p class="font-mono text-lg">{{ hasil }}</p>
        </div>
        {% endif %}
      </div>
    </div>
  </body>
  <script>
    // Tampilkan input shift atau key sesuai mode
    document.getElementById('mode').addEventListener('change', function () {
      let mode = this.value;

      if (mode.includes('caesar')) {
        document.getElementById('shift_box').style.display = 'block';
        document.getElementById('key_box').style.display = 'none';
      } else {
        document.getElementById('shift_box').style.display = 'none';
        document.getElementById('key_box').style.display = 'block';
      }
    });
  </script>
  <script src="{{ url_for('static', filename='flyonui.js') }}"></script>
</html>
